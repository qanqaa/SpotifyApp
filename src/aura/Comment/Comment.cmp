<aura:component description="Comment" controller="CommentSectionController">

    <aura:attribute name="propId" type="String"/>
    <aura:attribute name="objectId" type="String"/>
    <aura:attribute name="commentText" type="String"/>
    <aura:attribute name="rate" type="Integer"/>
    <aura:attribute name="commentAuthor" type="String"/>
    <aura:attribute name="commentDate" type="String"/>

    <aura:registerEvent name="commentDeletedSuccessfully" type="c:CommentDeletedEVENT"/>

    <aura:renderIf isTrue="{!or(v.commentText.length>0, rate>0) }">
        <lightning:layout class="slds-m-around_small" multipleRows="true">
            <lightning:layoutItem class="slds-p-bottom_small slds-size_1-of-1">
            {!v.commentAuthor}
                <lightning:button variant="destructive" label="Delete" onclick="{!c.deleteComment}"/>
            </lightning:layoutItem>

            <aura:renderIf isTrue="{!if(v.rate>0, true, false)}">
                <lightning:layoutItem class="slds-p-bottom_small slds-size_1-of-1">
                    <c:FiveStarRating aura:id="starRate" value="{!v.rate}" readonly="true"/>
                </lightning:layoutItem>
            </aura:renderIf>

            <aura:renderIf isTrue="{!if(v.commentText.length>0, true, false)}">
                <lightning:layoutItem>
                    <div aura:id="output" class="slds-box editor slds-text-longform" style="width:400px;">
                        <lightning:formattedRichText value="{!v.commentText}"/>
                    </div>
                </lightning:layoutItem>
            </aura:renderIf>
        </lightning:layout>
    </aura:renderIf>
</aura:component>
